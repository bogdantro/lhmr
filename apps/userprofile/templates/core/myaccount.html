{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static '/scss/userprofile/myaccount.css' %}" type="text/css">
<script rel="stylesheet" src="{% static '/js/myaccount.js' %}" type="text/javascript"></script>


<div class="myaccount">
    <div class="account-card">
        <h1 class="heading">Hei! {{user.first_name}}</h1>
        <hr>
        <div class="your-info">
            <p><span>Brukernavn:</span> &nbsp; {{ request.user.username }}</p>
            <p><span>Navn:</span> &nbsp; {{ request.user.get_full_name }}</p>
            <p><span>Epost:</span> &nbsp; {{ request.user.email }}</p>
        </div>
        

        <hr>

           
    
        <h1 class="heading">Mine Bestillinger</h1>

    <div class="my-orders">
        <div class="check-type-of-order-flex">
            <p id="startedOrdersP" onclick="startedOrders()">I gang</p>
            <p id="completedOrdersP" onclick="completedOrders()">Fullførte</p>
        </div>  
            <div class="if-order-finished hide" id="ifOrderFinished">
                {% for order in request.user.orders.all %}
                {% if orderFinished %}  
                <div class="you-got-orders" onclick="window.location.href='{% url 'orderinfo' order.id %}'">
                    <div class="order-row-one">
                        <h1 class="order-product">{{order.short_name}}</h1><p class="product-tag">{{order.tag}}</p>
                        <p class="order-price">{{ order.product_price | floatformat }}kr</p>
                    </div>
                    <div class="order-row-two">
                        <div class="row-one">
                            <p class="smalltext">Navn</p>
                            <h1>{{order.name}}</h1>
                        </div>
                        <div class="row-two">
                            <p class="smalltext">Bestillt</p>
                            <h1>{{order.created_at | date:"d F Y"}}</h1>
                        </div>
                    </div>
                </div> 
                {% else %}
                    <p class="no-finished">Du har ingen fullførte bestillinger enda...</p>
                {% endif %}
                {% empty %}
                        <p class="no-finished no-line">Du har ingen fullførte bestillinger enda...</p>
                {% endfor %}
            </div>
            <div class="if-order-started" id="ifOrderStarted">
                {% for order in request.user.orders.all %}
                {% if orderConfirmed %}  
                <div class="you-got-orders" onclick="window.location.href='{% url 'orderinfo' order.id %}'">
                    <div class="order-row-one">
                        <h1 class="order-product">{{order.short_name}}</h1><p class="product-tag">{{order.tag}}</p>
                        <p class="order-price">{{ order.product_price | floatformat }}kr</p>
                    </div>
                    <div class="order-row-two">
                        <div class="row-one">
                            <p class="smalltext">Navn</p>
                            <h1>{{order.name}}</h1>
                        </div>
                        <div class="row-two">
                            <p class="smalltext">Bestillt</p>
                            <h1>{{order.created_at | date:"d F Y"}}</h1>
                        </div>
                    </div>
                </div>   
                {% else %}
                    {% if orderFinished %}  
                    <p class="no-finished">Du har noen fullførte bestillinger</p>
                    {% else %}
                        <p class="no-finished">Bestillingene vil vises her</p>
                        <p class="no-finished no-line">Hvis du har sendt in bestillingen, vil det ta litt tid før bestillingen vises her</p>
                    {% endif %} 
                {% endif %} 
                    {% empty %}
                        <p class="no-finished">Bestillingene vil vises her</p>
                        <p class="no-finished no-line">Hvis du har sendt in bestillingen, vil det ta litt tid før bestillingen vises her</p>
                    {% endfor %}         
                </div>
                <br>
                <br>
                <br>
            </div>
        </div>
</div>
{% endblock %}
